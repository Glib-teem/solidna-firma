(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const g of c.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&n(g)}).observe(document,{childList:!0,subtree:!0});function r(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(s){if(s.ep)return;s.ep=!0;const c=r(s);fetch(s.href,c)}})();const j="https://dummyjson.com",C={PRODUCTS:"/products",PRODUCT_BY_ID:t=>`/products/${t}`,SEARCH:"/products/search",CATEGORIES:"/products/category-list",CATEGORY:t=>`/products/category/${t}`},p=12,O={CART:"cart",WISHLIST:"wishlist",THEME:"theme"},d={HIDDEN:"is-hidden",MODAL_OPEN:"modal--is-open",CATEGORY_ACTIVE:"categories__btn--active",NOT_FOUND_VISIBLE:"not-found--visible",NAV_ACTIVE:"nav__link--active"},I={ADD_TO_CART:"Add to Cart",REMOVE_FROM_CART:"Remove from Cart",ADD_TO_WISHLIST:"Add to Wishlist",REMOVE_FROM_WISHLIST:"Remove from Wishlist"},L={NO_MORE_PRODUCTS:"No more products to load",PURCHASE_SUCCESS:"Products purchased successfully!",SEARCH_EMPTY:"Please enter a search term",NO_PRODUCTS_FOUND:"No products found"};async function E(t){try{const e=await fetch(`${j}${t}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){throw console.error("API request failed:",e),e}}async function P(t=1){const e=(t-1)*p,r=`${C.PRODUCTS}?limit=${p}&skip=${e}`;return await E(r)}async function N(t){const e=C.PRODUCT_BY_ID(t);return await E(e)}async function q(t,e=1){const r=(e-1)*p,n=`${C.SEARCH}?q=${encodeURIComponent(t)}&limit=${p}&skip=${r}`;return await E(n)}async function st(){const t=C.CATEGORIES;return await E(t)}async function H(t,e=1){const r=(e-1)*p,n=`${C.CATEGORY(t)}?limit=${p}&skip=${r}`;return await E(n)}async function ct(t){if(!t||t.length===0)return[];try{const e=t.map(n=>N(n));return await Promise.all(e)}catch(e){return console.error("Error fetching products by IDs:",e),[]}}const o={categoriesList:document.querySelector(".categories"),productsList:document.querySelector(".products"),loadMoreBtn:document.querySelector(".load-more-btn"),notFound:document.querySelector(".not-found"),searchForm:document.querySelector(".search-form"),searchInput:document.querySelector(".search-form__input"),clearSearchBtn:document.querySelector(".search-form__btn-clear"),modal:document.querySelector(".modal"),modalContent:document.querySelector(".modal-product"),modalCloseBtn:document.querySelector(".modal__close-btn"),wishlistBtn:document.querySelector(".modal-product__btn--wishlist"),cartBtn:document.querySelector(".modal-product__btn--cart"),cartCount:document.querySelector("[data-cart-count]"),wishlistCount:document.querySelector("[data-wishlist-count]"),cartItemsCount:document.querySelector("[data-count]"),cartTotalPrice:document.querySelector("[data-price]"),buyBtn:document.querySelector(".cart-summary__btn"),themeToggleBtn:document.querySelector(".theme-toggle-btn"),scrollTopBtn:document.querySelector(".scroll-top-btn")};function at(t){return t.map(e=>`<li class="categories__item">
       <button class="categories__btn" type="button">${e}</button>
     </li>`).join("")}function z(t){return`
    <li class="products__item" data-id="${t.id}">
      <img class="products__image" src="${t.thumbnail}" alt="${t.title}"/>
      <p class="products__title">${t.title}</p>
      <p class="products__brand"><span class="products__brand--bold">Brand:</span> ${t.brand||"No brand"}</p>
      <p class="products__category">Category: ${t.category}</p>
      <p class="products__price">Price: $${t.price}</p>
    </li>
  `}function w(t){return!t||t.length===0?"":t.map(z).join("")}function K(t){const e=t.tags?t.tags.map(r=>`<li>${r}</li>`).join(""):"";return`
    <img class="modal-product__img" src="${t.thumbnail}" alt="${t.title}" />
    <div class="modal-product__content">
      <p class="modal-product__title">${t.title}</p>
      <ul class="modal-product__tags">${e}</ul>
      <p class="modal-product__description">${t.description}</p>
      <p class="modal-product__shipping-information">Shipping: ${t.shippingInformation||"Standard shipping"}</p>
      <p class="modal-product__return-policy">Return Policy: ${t.returnPolicy||"Standard return policy"}</p>
      <p class="modal-product__price">Price: $${t.price}</p>
      <button class="modal-product__buy-btn" type="button">Buy</button>
    </div>
  `}function B(t,e){const r=document.querySelector("[data-cart-count]"),n=document.querySelector("[data-wishlist-count]");r&&(r.textContent=t),n&&(n.textContent=e)}function it(t){const e=document.querySelector("[data-count]"),r=document.querySelector("[data-price]");if(!e||!r)return;const n=t.length,s=t.reduce((c,g)=>c+g.price,0);e.textContent=n,r.textContent=`$${s.toFixed(2)}`}function F(t){try{const e=localStorage.getItem(t);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting data from localStorage:",e),[]}}function k(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(r){console.error("Error saving data to localStorage:",r)}}function m(){return F(O.CART)}function U(t){k(O.CART,t)}function J(t){const e=m();return e.includes(t)||(e.push(t),U(e)),e}function Q(t){const r=m().filter(n=>n!==t);return U(r),r}function x(t){return m().includes(t)}function h(){return F(O.WISHLIST)}function W(t){k(O.WISHLIST,t)}function X(t){const e=h();return e.includes(t)||(e.push(t),W(e)),e}function Z(t){const r=h().filter(n=>n!==t);return W(r),r}function V(t){return h().includes(t)}function _(t){t&&t.classList.remove(d.HIDDEN)}function l(t){t&&t.classList.add(d.HIDDEN)}function R(t){t&&t.classList.add(d.NOT_FOUND_VISIBLE)}function b(t){t&&t.classList.remove(d.NOT_FOUND_VISIBLE)}function A(t){t&&(t.innerHTML="")}function M(t,e){if(!t)return;t.querySelectorAll(".categories__btn").forEach(n=>{n.classList.remove(d.CATEGORY_ACTIVE),n.textContent.trim()===e&&n.classList.add(d.CATEGORY_ACTIVE)})}function tt(t){return t&&t.trim().length>0}function et(){window.scrollTo({top:0,behavior:"smooth"})}function T(){let t=document.querySelector(".loader");t||(t=document.createElement("div"),t.className="loader",t.innerHTML='<div class="loader__spinner"></div>',document.body.appendChild(t)),t.style.display="flex"}function f(){const t=document.querySelector(".loader");t&&(t.style.display="none")}function lt(){const t=localStorage.getItem("theme")||"light";return document.documentElement.setAttribute("data-theme",t),t}function ot(){const e=document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark";return document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e),e}function i(t,e="info"){window.iziToast?window.iziToast[e]({title:e.charAt(0).toUpperCase()+e.slice(1),message:t,position:"topRight"}):alert(t)}let v=null;function rt(t){!o.modal||!o.modalContent||(v=t,o.modalContent.innerHTML=K(t),D(t.id),o.modal.classList.add(d.MODAL_OPEN),document.body.style.overflow="hidden",document.addEventListener("keydown",Y))}function $(){o.modal&&(o.modal.classList.remove(d.MODAL_OPEN),document.body.style.overflow="",v=null,document.removeEventListener("keydown",Y))}function Y(t){t.key==="Escape"&&$()}function nt(t){t.target===o.modal&&$()}function D(t){!o.wishlistBtn||!o.cartBtn||(V(t)?o.wishlistBtn.textContent=I.REMOVE_FROM_WISHLIST:o.wishlistBtn.textContent=I.ADD_TO_WISHLIST,x(t)?o.cartBtn.textContent=I.REMOVE_FROM_CART:o.cartBtn.textContent=I.ADD_TO_CART)}function G(){return v}function ut(){o.modalCloseBtn&&o.modalCloseBtn.addEventListener("click",$),o.modal&&o.modal.addEventListener("click",nt)}let a=1,y="All",S="",u=!1;async function dt(t){if(!t.target.classList.contains("categories__btn")||u)return;u=!0;const e=t.target.textContent.trim();y=e,a=1,S="";try{T(),b(o.notFound),M(o.categoriesList,e),o.searchInput&&(o.searchInput.value=""),l(o.clearSearchBtn);let r;e==="All"?r=await P(a):r=await H(e,a),A(o.productsList),r.products&&r.products.length>0?(o.productsList.innerHTML=w(r.products),r.products.length===12&&r.total>r.skip+r.products.length?_(o.loadMoreBtn):l(o.loadMoreBtn)):(R(o.notFound),l(o.loadMoreBtn))}catch(r){console.error("Error loading category products:",r),i("Error loading products","error")}finally{f(),u=!1}}async function pt(t){const e=t.target.closest(".products__item");if(!e)return;const r=parseInt(e.dataset.id);try{T();const n=await N(r);f(),rt(n)}catch(n){f(),console.error("Error loading product:",n),i("Error loading product details","error")}}async function ft(t){if(t.preventDefault(),u)return;const e=o.searchInput.value.trim();if(!tt(e)){i(L.SEARCH_EMPTY,"error");return}u=!0,S=e,a=1,y="";try{T(),b(o.notFound),M(o.categoriesList,"");const r=await q(e,a);A(o.productsList),r.products&&r.products.length>0?(o.productsList.innerHTML=w(r.products),_(o.clearSearchBtn),r.products.length===12&&r.total>r.skip+r.products.length?_(o.loadMoreBtn):l(o.loadMoreBtn)):(R(o.notFound),l(o.loadMoreBtn),_(o.clearSearchBtn))}catch(r){console.error("Error searching products:",r),i("Error searching products","error")}finally{f(),u=!1}}async function mt(){o.searchInput&&(o.searchInput.value=""),l(o.clearSearchBtn),S="",y="All",a=1;try{T(),b(o.notFound),M(o.categoriesList,"All");const t=await P(a);A(o.productsList),t.products&&t.products.length>0&&(o.productsList.innerHTML=w(t.products),t.products.length===12&&t.total>t.skip+t.products.length?_(o.loadMoreBtn):l(o.loadMoreBtn))}catch(t){console.error("Error loading products:",t),i("Error loading products","error")}finally{f()}}async function ht(){if(!u){u=!0,a++;try{T();let t;S?t=await q(S,a):y==="All"?t=await P(a):t=await H(y,a),t.products&&t.products.length>0?(o.productsList.insertAdjacentHTML("beforeend",w(t.products)),t.total<=t.skip+t.products.length&&(l(o.loadMoreBtn),i(L.NO_MORE_PRODUCTS,"info"))):(l(o.loadMoreBtn),i(L.NO_MORE_PRODUCTS,"info"))}catch(t){console.error("Error loading more products:",t),i("Error loading more products","error"),a--}finally{f(),u=!1}}}function gt(){const t=G();if(!t)return;const e=t.id;V(e)?Z(e):X(e),D(e);const r=m().length,n=h().length;B(r,n)}function _t(){const t=G();if(!t)return;const e=t.id;x(e)?Q(e):J(e),D(e);const r=m().length,n=h().length;B(r,n)}function yt(){ot()}function St(){et()}function Ct(){if(m().length===0){i("Your cart is empty","error");return}localStorage.removeItem("cart"),A(o.productsList),R(o.notFound),B(0,h().length),o.cartItemsCount&&(o.cartItemsCount.textContent="0"),o.cartTotalPrice&&(o.cartTotalPrice.textContent="$0"),i(L.PURCHASE_SUCCESS,"success")}function Et(){window.addEventListener("scroll",()=>{o.scrollTopBtn&&(window.pageYOffset>300?o.scrollTopBtn.style.display="block":o.scrollTopBtn.style.display="none")})}export{ft as A,mt as B,ht as C,it as D,Ct as E,R as a,ct as b,A as c,w as d,b as e,m as f,h as g,f as h,lt as i,i as j,pt as k,_t as l,yt as m,St as n,ut as o,Et as p,gt as q,o as r,T as s,st as t,B as u,at as v,M as w,P as x,_ as y,dt as z};
//# sourceMappingURL=handlers-RHYWRFVR.js.map
