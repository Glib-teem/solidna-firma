(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const g of c.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&n(g)}).observe(document,{childList:!0,subtree:!0});function r(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(s){if(s.ep)return;s.ep=!0;const c=r(s);fetch(s.href,c)}})();const z="https://dummyjson.com",C={PRODUCTS:"/products",PRODUCT_BY_ID:t=>`/products/${t}`,SEARCH:"/products/search",CATEGORIES:"/products/category-list",CATEGORY:t=>`/products/category/${t}`},m=12,O={CART:"cart",WISHLIST:"wishlist",THEME:"theme"},l={HIDDEN:"is-hidden",MODAL_OPEN:"modal--is-open",CATEGORY_ACTIVE:"categories__btn--active",NOT_FOUND_VISIBLE:"not-found--visible",NAV_ACTIVE:"nav__link--active",SCROLL_TOP_VISIBLE:"scroll-top-btn--visible"},L={ADD_TO_CART:"Add to Cart",REMOVE_FROM_CART:"Remove from Cart",ADD_TO_WISHLIST:"Add to Wishlist",REMOVE_FROM_WISHLIST:"Remove from Wishlist"},I={NO_MORE_PRODUCTS:"No more products to load",PURCHASE_SUCCESS:"Products purchased successfully!",SEARCH_EMPTY:"Please enter a search term",NO_PRODUCTS_FOUND:"No products found"};async function E(t){try{const e=await fetch(`${z}${t}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){throw console.error("API request failed:",e),e}}async function A(t=1){const e=(t-1)*m,r=`${C.PRODUCTS}?limit=${m}&skip=${e}`;return await E(r)}async function q(t){const e=C.PRODUCT_BY_ID(t);return await E(e)}async function H(t,e=1){const r=(e-1)*m,n=`${C.SEARCH}?q=${encodeURIComponent(t)}&limit=${m}&skip=${r}`;return await E(n)}async function ct(){const t=C.CATEGORIES;return await E(t)}async function F(t,e=1){const r=(e-1)*m,n=`${C.CATEGORY(t)}?limit=${m}&skip=${r}`;return await E(n)}async function it(t){if(!t||t.length===0)return[];try{const e=t.map(n=>q(n));return await Promise.all(e)}catch(e){return console.error("Error fetching products by IDs:",e),[]}}const o={categoriesList:document.querySelector(".categories"),productsList:document.querySelector(".products"),loadMoreBtn:document.querySelector(".load-more-btn"),notFound:document.querySelector(".not-found"),searchForm:document.querySelector(".search-form"),searchInput:document.querySelector(".search-form__input"),clearSearchBtn:document.querySelector(".search-form__btn-clear"),modal:document.querySelector(".modal"),modalContent:document.querySelector(".modal-product"),modalCloseBtn:document.querySelector(".modal__close-btn"),wishlistBtn:document.querySelector(".modal-product__btn--wishlist"),cartBtn:document.querySelector(".modal-product__btn--cart"),cartCount:document.querySelector("[data-cart-count]"),wishlistCount:document.querySelector("[data-wishlist-count]"),cartItemsCount:document.querySelector("[data-count]"),cartTotalPrice:document.querySelector("[data-price]"),buyBtn:document.querySelector(".cart-summary__btn"),themeToggleBtn:document.querySelector(".theme-toggle-btn"),scrollTopBtn:document.querySelector(".scroll-top-btn")};function at(t){return t.map(e=>`<li class="categories__item">
       <button class="categories__btn" type="button">${e}</button>
     </li>`).join("")}function K(t){return`
    <li class="products__item" data-id="${t.id}">
      <img class="products__image" src="${t.thumbnail}" alt="${t.title}"/>
      <p class="products__title">${t.title}</p>
      <p class="products__brand"><span class="products__brand--bold">Brand:</span> ${t.brand||"No brand"}</p>
      <p class="products__category">Category: ${t.category}</p>
      <p class="products__price">Price: $${t.price}</p>
    </li>
  `}function w(t){return!t||t.length===0?"":t.map(K).join("")}function J(t){const e=t.tags?t.tags.map(r=>`<li>${r}</li>`).join(""):"";return`
    <img class="modal-product__img" src="${t.thumbnail}" alt="${t.title}" />
    <div class="modal-product__content">
      <p class="modal-product__title">${t.title}</p>
      <ul class="modal-product__tags">${e}</ul>
      <p class="modal-product__description">${t.description}</p>
      <p class="modal-product__shipping-information">Shipping: ${t.shippingInformation||"Standard shipping"}</p>
      <p class="modal-product__return-policy">Return Policy: ${t.returnPolicy||"Standard return policy"}</p>
      <p class="modal-product__price">Price: $${t.price}</p>
      <button class="modal-product__buy-btn" type="button">Buy</button>
    </div>
  `}function B(t,e){const r=document.querySelector("[data-cart-count]"),n=document.querySelector("[data-wishlist-count]");r&&(r.textContent=t),n&&(n.textContent=e)}function lt(t){const e=document.querySelector("[data-count]"),r=document.querySelector("[data-price]");if(!e||!r)return;const n=t.length,s=t.reduce((c,g)=>c+g.price,0);e.textContent=n,r.textContent=`$${s.toFixed(2)}`}function k(t){try{const e=localStorage.getItem(t);return e?JSON.parse(e):[]}catch(e){return console.error("Error getting data from localStorage:",e),[]}}function U(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(r){console.error("Error saving data to localStorage:",r)}}function f(){return k(O.CART)}function V(t){U(O.CART,t)}function Q(t){const e=f();return e.includes(t)||(e.push(t),V(e)),e}function X(t){const r=f().filter(n=>n!==t);return V(r),r}function x(t){return f().includes(t)}function h(){return k(O.WISHLIST)}function W(t){U(O.WISHLIST,t)}function Z(t){const e=h();return e.includes(t)||(e.push(t),W(e)),e}function tt(t){const r=h().filter(n=>n!==t);return W(r),r}function Y(t){return h().includes(t)}function _(t){t&&t.classList.remove(l.HIDDEN)}function u(t){t&&t.classList.add(l.HIDDEN)}function R(t){t&&t.classList.add(l.NOT_FOUND_VISIBLE)}function b(t){t&&t.classList.remove(l.NOT_FOUND_VISIBLE)}function P(t){t&&(t.innerHTML="")}function v(t,e){if(!t)return;t.querySelectorAll(".categories__btn").forEach(n=>{n.classList.remove(l.CATEGORY_ACTIVE),n.textContent.trim()===e&&n.classList.add(l.CATEGORY_ACTIVE)})}function et(t){return t&&t.trim().length>0}function ot(){window.scrollTo({top:0,behavior:"smooth"})}function T(){let t=document.querySelector(".loader");t||(t=document.createElement("div"),t.className="loader",t.innerHTML='<div class="loader__spinner"></div>',document.body.appendChild(t)),t.style.display="flex"}function p(){const t=document.querySelector(".loader");t&&(t.style.display="none")}function ut(){const t=localStorage.getItem("theme")||"light";return document.documentElement.setAttribute("data-theme",t),t}function rt(){const e=document.documentElement.getAttribute("data-theme")==="dark"?"light":"dark";return document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e),e}function a(t,e="info"){window.iziToast?window.iziToast[e]({title:e.charAt(0).toUpperCase()+e.slice(1),message:t,position:"topRight"}):alert(t)}let M=null;function nt(t){!o.modal||!o.modalContent||(M=t,o.modalContent.innerHTML=J(t),D(t.id),o.modal.classList.add(l.MODAL_OPEN),document.body.style.overflow="hidden",document.addEventListener("keydown",G))}function $(){o.modal&&(o.modal.classList.remove(l.MODAL_OPEN),document.body.style.overflow="",M=null,document.removeEventListener("keydown",G))}function G(t){t.key==="Escape"&&$()}function st(t){t.target===o.modal&&$()}function D(t){!o.wishlistBtn||!o.cartBtn||(Y(t)?o.wishlistBtn.textContent=L.REMOVE_FROM_WISHLIST:o.wishlistBtn.textContent=L.ADD_TO_WISHLIST,x(t)?o.cartBtn.textContent=L.REMOVE_FROM_CART:o.cartBtn.textContent=L.ADD_TO_CART)}function j(){return M}function dt(){o.modalCloseBtn&&o.modalCloseBtn.addEventListener("click",$),o.modal&&o.modal.addEventListener("click",st)}let i=1,S="All",y="",d=!1;async function mt(t){if(!t.target.classList.contains("categories__btn")||d)return;d=!0;const e=t.target.textContent.trim();S=e,i=1,y="";try{T(),b(o.notFound),v(o.categoriesList,e),o.searchInput&&(o.searchInput.value=""),u(o.clearSearchBtn);let r;e==="All"?r=await A(i):r=await F(e,i),P(o.productsList),r.products&&r.products.length>0?(o.productsList.innerHTML=w(r.products),r.products.length===12&&r.total>r.skip+r.products.length?_(o.loadMoreBtn):u(o.loadMoreBtn)):(R(o.notFound),u(o.loadMoreBtn))}catch(r){console.error("Error loading category products:",r),a("Error loading products","error")}finally{p(),d=!1}}async function pt(t){const e=t.target.closest(".products__item");if(!e)return;const r=parseInt(e.dataset.id);try{T();const n=await q(r);p(),nt(n)}catch(n){p(),console.error("Error loading product:",n),a("Error loading product details","error")}}async function ft(t){if(t.preventDefault(),d)return;const e=o.searchInput.value.trim();if(!et(e)){a(I.SEARCH_EMPTY,"error");return}d=!0,y=e,i=1,S="";try{T(),b(o.notFound),v(o.categoriesList,"");const r=await H(e,i);P(o.productsList),r.products&&r.products.length>0?(o.productsList.innerHTML=w(r.products),_(o.clearSearchBtn),r.products.length===12&&r.total>r.skip+r.products.length?_(o.loadMoreBtn):u(o.loadMoreBtn)):(R(o.notFound),u(o.loadMoreBtn),_(o.clearSearchBtn))}catch(r){console.error("Error searching products:",r),a("Error searching products","error")}finally{p(),d=!1}}async function ht(){o.searchInput&&(o.searchInput.value=""),u(o.clearSearchBtn),y="",S="All",i=1;try{T(),b(o.notFound),v(o.categoriesList,"All");const t=await A(i);P(o.productsList),t.products&&t.products.length>0&&(o.productsList.innerHTML=w(t.products),t.products.length===12&&t.total>t.skip+t.products.length?_(o.loadMoreBtn):u(o.loadMoreBtn))}catch(t){console.error("Error loading products:",t),a("Error loading products","error")}finally{p()}}async function gt(){if(!d){d=!0,i++;try{T();let t;y?t=await H(y,i):S==="All"?t=await A(i):t=await F(S,i),t.products&&t.products.length>0?(o.productsList.insertAdjacentHTML("beforeend",w(t.products)),t.total<=t.skip+t.products.length&&(u(o.loadMoreBtn),a(I.NO_MORE_PRODUCTS,"info"))):(u(o.loadMoreBtn),a(I.NO_MORE_PRODUCTS,"info"))}catch(t){console.error("Error loading more products:",t),a("Error loading more products","error"),i--}finally{p(),d=!1}}}function _t(){const t=j();if(!t)return;const e=t.id;Y(e)?tt(e):Z(e),D(e);const r=f().length,n=h().length;B(r,n)}function St(){const t=j();if(!t)return;const e=t.id;x(e)?X(e):Q(e),D(e);const r=f().length,n=h().length;B(r,n)}function yt(){rt()}function Ct(){ot()}function Et(){if(f().length===0){a("Your cart is empty","error");return}localStorage.removeItem("cart"),P(o.productsList),R(o.notFound),B(0,h().length),o.cartItemsCount&&(o.cartItemsCount.textContent="0"),o.cartTotalPrice&&(o.cartTotalPrice.textContent="$0"),a(I.PURCHASE_SUCCESS,"success")}function Tt(){window.addEventListener("scroll",N),N()}function N(){if(o.scrollTopBtn){const t=document.documentElement.scrollHeight,e=window.innerHeight;(window.pageYOffset||document.documentElement.scrollTop)+e>=t-100?o.scrollTopBtn.classList.add(l.SCROLL_TOP_VISIBLE):o.scrollTopBtn.classList.remove(l.SCROLL_TOP_VISIBLE)}}export{ft as A,ht as B,gt as C,lt as D,Et as E,R as a,it as b,P as c,w as d,b as e,f,h as g,p as h,ut as i,a as j,pt as k,St as l,yt as m,Ct as n,dt as o,Tt as p,_t as q,o as r,T as s,ct as t,B as u,at as v,v as w,A as x,_ as y,mt as z};
//# sourceMappingURL=handlers-b93b39gy.js.map
