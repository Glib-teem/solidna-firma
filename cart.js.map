{"version":3,"file":"cart.js","sources":["../src/cart.js"],"sourcesContent":["import { getProductsByIds } from './js/products-api.js';\nimport { refs } from './js/refs.js';\nimport {\n  renderProducts,\n  updateNavCounters,\n  updateCartSummary,\n} from './js/render-function.js'; // Зверніть увагу: 'render-function.js'\nimport { getCart, getWishlist } from './js/storage.js';\nimport {\n  clearElement,\n  showNotFound,\n  hideNotFound,\n  showLoader,\n  hideLoader,\n  initTheme,\n  showToast,\n} from './js/helpers.js';\nimport { initModalListeners } from './js/modal.js';\nimport {\n  handleProductClick,\n  handleWishlistClick,\n  handleCartClick,\n  handleThemeToggle,\n  handleScrollToTop,\n  handleBuyProducts,\n  initScrollListener,\n} from './js/handlers.js';\n\n// Initialize cart page\nasync function initCartPage() {\n  try {\n    // Initialize theme\n    initTheme();\n\n    // Show loader\n    showLoader();\n\n    // Get cart items\n    const cartIds = getCart();\n\n    if (cartIds.length === 0) {\n      showNotFound(refs.notFound);\n      hideLoader();\n      updateCartSummary([]);\n      return;\n    }\n\n    // Load products by IDs\n    const products = await getProductsByIds(cartIds);\n\n    if (refs.productsList) {\n      clearElement(refs.productsList);\n\n      if (products && products.length > 0) {\n        refs.productsList.innerHTML = renderProducts(products);\n        hideNotFound(refs.notFound);\n        updateCartSummary(products);\n      } else {\n        showNotFound(refs.notFound);\n        updateCartSummary([]);\n      }\n    }\n\n    // Update navigation counters\n    const cartCount = getCart().length;\n    const wishlistCount = getWishlist().length;\n    updateNavCounters(cartCount, wishlistCount);\n  } catch (error) {\n    console.error('Error loading cart:', error);\n    showToast('Error loading cart', 'error');\n    showNotFound(refs.notFound);\n    updateCartSummary([]);\n  } finally {\n    hideLoader();\n  }\n}\n\n// Add event listeners\nfunction addEventListeners() {\n  // Products\n  if (refs.productsList) {\n    refs.productsList.addEventListener('click', handleProductClick);\n  }\n\n  // Modal buttons\n  if (refs.wishlistBtn) {\n    refs.wishlistBtn.addEventListener('click', handleWishlistClick);\n  }\n\n  if (refs.cartBtn) {\n    refs.cartBtn.addEventListener('click', () => {\n      handleCartClick();\n      // Refresh cart page after removing item\n      setTimeout(() => {\n        initCartPage();\n      }, 100);\n    });\n  }\n\n  // Buy button\n  if (refs.buyBtn) {\n    refs.buyBtn.addEventListener('click', handleBuyProducts);\n  }\n\n  // Theme toggle\n  if (refs.themeToggleBtn) {\n    refs.themeToggleBtn.addEventListener('click', handleThemeToggle);\n  }\n\n  // Scroll to top\n  if (refs.scrollTopBtn) {\n    refs.scrollTopBtn.addEventListener('click', handleScrollToTop);\n  }\n\n  // Initialize modal listeners\n  initModalListeners();\n\n  // Initialize scroll listener\n  initScrollListener();\n}\n\n// DOM Content Loaded\ndocument.addEventListener('DOMContentLoaded', () => {\n  addEventListeners();\n  initCartPage();\n});\n"],"names":["initCartPage","initTheme","showLoader","cartIds","getCart","showNotFound","refs","hideLoader","updateCartSummary","products","getProductsByIds","clearElement","renderProducts","hideNotFound","cartCount","wishlistCount","getWishlist","updateNavCounters","error","showToast","addEventListeners","handleProductClick","handleWishlistClick","handleCartClick","handleBuyProducts","handleThemeToggle","handleScrollToTop","initModalListeners","initScrollListener"],"mappings":"gMA6BA,eAAeA,GAAe,CAC5B,GAAI,CAEFC,IAGAC,IAGA,MAAMC,EAAUC,IAEhB,GAAID,EAAQ,SAAW,EAAG,CACxBE,EAAaC,EAAK,QAAQ,EAC1BC,IACAC,EAAkB,CAAE,CAAA,EACpB,MACD,CAGD,MAAMC,EAAW,MAAMC,EAAiBP,CAAO,EAE3CG,EAAK,eACPK,EAAaL,EAAK,YAAY,EAE1BG,GAAYA,EAAS,OAAS,GAChCH,EAAK,aAAa,UAAYM,EAAeH,CAAQ,EACrDI,EAAaP,EAAK,QAAQ,EAC1BE,EAAkBC,CAAQ,IAE1BJ,EAAaC,EAAK,QAAQ,EAC1BE,EAAkB,CAAE,CAAA,IAKxB,MAAMM,EAAYV,EAAS,EAAC,OACtBW,EAAgBC,EAAa,EAAC,OACpCC,EAAkBH,EAAWC,CAAa,CAC3C,OAAQG,EAAO,CACd,QAAQ,MAAM,sBAAuBA,CAAK,EAC1CC,EAAU,qBAAsB,OAAO,EACvCd,EAAaC,EAAK,QAAQ,EAC1BE,EAAkB,CAAE,CAAA,CACxB,QAAY,CACRD,GACD,CACH,CAGA,SAASa,GAAoB,CAEvBd,EAAK,cACPA,EAAK,aAAa,iBAAiB,QAASe,CAAkB,EAI5Df,EAAK,aACPA,EAAK,YAAY,iBAAiB,QAASgB,CAAmB,EAG5DhB,EAAK,SACPA,EAAK,QAAQ,iBAAiB,QAAS,IAAM,CAC3CiB,IAEA,WAAW,IAAM,CACfvB,GACD,EAAE,GAAG,CACZ,CAAK,EAICM,EAAK,QACPA,EAAK,OAAO,iBAAiB,QAASkB,CAAiB,EAIrDlB,EAAK,gBACPA,EAAK,eAAe,iBAAiB,QAASmB,CAAiB,EAI7DnB,EAAK,cACPA,EAAK,aAAa,iBAAiB,QAASoB,CAAiB,EAI/DC,IAGAC,GACF,CAGA,SAAS,iBAAiB,mBAAoB,IAAM,CAClDR,IACApB,GACF,CAAC"}